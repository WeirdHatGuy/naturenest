<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>NatureNest</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">NatureNest</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link-special" href="product-single.html"
                >Products</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link-special" href="cart.html">Cart</a>
            </li>
            <li class="nav-item">
              <a class="nav-link-special" href="contact.html">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link-special" href="about.html">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <h1>Products</h1>
      <div class="row">
        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-1.jpg"
              class="card-img-top"
              alt="Bell Pepper"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Bell Pepper</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Bell Pepper', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-2.jpg"
              class="card-img-top"
              alt="Strawberry"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Strawberry</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Strawberry', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img src="images/product-3.jpg" class="card-img-top" alt="Beans" />
            <div class="card-body text-center">
              <h5 class="card-title">Beans</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Beans', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-4.jpg"
              class="card-img-top"
              alt="Cabbage"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Cabbage</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Cabbage', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-5.jpg"
              class="card-img-top"
              alt="Tomatoes"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Tomatoes</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Tomatoes', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-6.jpg"
              class="card-img-top"
              alt="Broccoli"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Broccoli</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Broccoli', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-7.jpg"
              class="card-img-top"
              alt="Carrots"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Carrots</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Carrots', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-8.jpg"
              class="card-img-top"
              alt="Health mix smoothie"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Health mix smoothie</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Health mix smoothie', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img src="images/product-9.jpg" class="card-img-top" alt="Onions" />
            <div class="card-body text-center">
              <h5 class="card-title">Onions</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Onions', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-10.jpg"
              class="card-img-top"
              alt="Apples"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Apples</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Apples', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-11.jpg"
              class="card-img-top"
              alt="Garlic"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Garlic</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Garlic', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 ftco-animate padding-15">
          <div class="product card">
            <img
              src="images/product-12.jpg"
              class="card-img-top"
              alt="Chilli"
            />
            <div class="card-body text-center">
              <h5 class="card-title">Chilli</h5>
              <p class="card-text">$120.00</p>
              <button
                data-bs-toggle="tooltip"
                data-bs-original-title="Add to Cart"
                onclick="addToCartClick('Chilli', 120)"
                class="btn btn-primary"
              >
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="ftco-footer ftco-section">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center">
            <p>
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved <i class="fas fa-heart"></i> by
              <a href="#" target="_blank">NatureNest</a>
            </p>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      function addToCartClick(productName, price) {
        addToCart(productName, price);
      }

      function addToCart(productName, price, action) {
        const xhr = new XMLHttpRequest();

        xhr.open(
          "POST" + (action === "remove" ? "GET" : ""),
          `addToCart.php?productName=${productName}&price=${price}`,
          true
        );

        xhr.setRequestHeader(
          "Content-Type",
          "application/x-www-form-urlencoded"
        );

        xhr.onload = function () {
          if (this.status === 200) {
            const updatedCart = JSON.parse(this.responseText);

            // Update the local storage with the new cart data
            localStorage.setItem("cart", JSON.stringify(updatedCart));

            // Redirect to the cart page after removing
            if (action === "remove") {
              window.location.href = "cart.html";
            }
          }
        };

        xhr.send(`productName=${productName}&price=${price}`);
      }

      // Add tooltip
      const tooltipTriggerList = [].slice.call(
        document.querySelectorAll('button[data-bs-toggle="tooltip"]')
      );

      tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      function updateCartUI() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Find all the add-to-cart buttons
        const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");

        // Update the UI by adding the "disabled" attribute to all the buttons
        addToCartButtons.forEach((button) => {
          const productName = button.dataset.productName;

          if (cart.some((item) => item.productName === productName)) {
            button.disabled = true;
          } else {
            button.disabled = false;
          }
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateCartUI();
      });

      window.addEventListener("storage", (event) => {
        if (event.key === "cart") {
          updateCartUI();
        }
      });
    </script>
  </body>
</html>
